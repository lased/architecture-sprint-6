# Проблемы и риски, связанные с планируемым ростом нагрузки

## Проблемы:

1. **Синхронные вызовы между сервисами через REST API**: сервисы `core-app` и `ins-comp-settlement` синхронно обращаются к `ins-product-aggregator` для получения списка доступных продуктов - это приводит к задержкам ответов и возможным ошибкам при взаимодействии с API страховых компаний

2. **Рассинхронизация данных**: `core-app` запрашивает данные у `ins-product-aggregator` раз в 15 минут, а `ins-comp-settlement` — раз в сутки, что приводит к тому, что данные о продуктах и тарифах могут устареть. `ins-comp-settlement` также запрашивает данные о оформленных страховках у `core-app` через REST API раз в сутки, что создаёт узкое место в процессе расчётов и сильно влияет на потребителей

3. **Ошибки взаимодействия с внешними API**: ошибки в API страховых компаний могут вызвать проблемы при работе с сервисом `ins-product-aggregator`, а он в свою очередь может повлиять на работоспособность зависящих от него сервисов

## Риски:

1. **Рост ошибок и задержек**: увеличится обьем ошибок и задержек в сервисе `ins-product-aggregator`, если он начнет обрабатывать больше внешних API

1. **Масштабируемость**: при нынешнем подходе, текущая система не сможет адекватно справляться с большим обьемом синхронных событий, что может ограничить ее масштабируемость и увеличить время ответа от сервисов

1. **Снижение производительности**: увеличение числа интеграций с новыми страховыми компаниями увеличит нагрузку на `ins-product-aggregator`, что может привести к снижению ее производительности, а также и их потребителей за счет долгого ответа

## Решение

Внедрение Event-Driven архитектуры:

- сервис `ins-product-aggregator` будет генерировать события о доступных продуктах, которые будут публиковаться в виде сообщений

- сервисы `core-app` и `ins-comp-settlement` будут подписаны на соответствующие события и получат уведомления об изменениях.

Event-Driven архитектура позволит независимо масштабировать сервисы и управлять нагрузкой на систему.
Асинхронное взаимодействие обеспечит более гибкий подход к обработке запросов и снижение задержек.
В целом, переход на Event-Driven архитектуру позволит устранить текущие проблемы синхронного взаимодействия, увеличить масштабируемость и гибкость системы, а также упростит процесс разработки и обслуживания приложений.
